<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" >
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>업로드 테스트</title>
    <link rel="stylesheet" th:href="@{/styles.css}" />
    <link rel="stylesheet" th:href="@{/upload-test.css}" />
</head>

<body>
<main class="page">
    <header class="page__header">
        <div class="title-row">
            <!-- <span class="title-emoji" aria-hidden="true">📤</span> -->
            <h1 class="page-title">업로드 테스트</h1>
        </div>
        <p class="page-desc">현재 차단 정책이 실제 업로드에 어떻게 적용되는지 검증합니다.</p>
    </header>

    <!-- 업로드 폼 -->
    <section class="card">
        <h2 class="card__title">파일 업로드</h2>

        <form id="uploadForm" class="form-table" action="#" method="post" enctype="multipart/form-data">
            <div class="form-table__label">제목</div>
            <div class="form-table__field">
                <input type="text" class="input" placeholder="테스트 제목을 입력하세요" />
            </div>

            <div class="form-table__label">파일 첨부</div>
            <div class="form-table__field">
                <input type="file" name="file" id="file" />
                <p class="hint">* 금지 확장자일 경우 업로드가 차단됩니다.</p>
            </div>

        </form>
        <div class="actions">
            <!-- [JS연결지점] 서버 저장(일괄 저장을 선택할 경우) -->
            <button type="submit" class="btn btn-primary" form="uploadForm">업로드</button>
            <button type="button" class="btn btn-ghost">
                <a th:href="@{/file-ext-blocker.html}">취소</a>
            </button>
        </div>
    </section>

    <!-- 최근 업로드 카드 -->
    <section class="card">
        <h2 class="card__title">최근 업로드</h2>

        <table class="data-table">
            <colgroup>
                <col style="width:48%">
                <col style="width:14%">
                <col style="width:18%">
                <col style="width:20%">
            </colgroup>

            <thead>
            <tr>
                <th>파일명</th>
                <th>확장자</th>
                <th>결과</th>
                <th>시간</th>
            </tr>
            </thead>

            <tbody id="recentTbody"></tbody>
        </table>
    </section>

    <footer class="page__footer">copyright ©2025 Developer_KIMMINHEE</footer>

    <!-- 결과 모달(업로드 성공/차단 메시지 용) -->
    <div class="modal" id="resultModal" role="dialog" aria-modal="true" aria-labelledby="rTitle">
        <div class="modal__backdrop"></div>
        <div class="modal__dialog">
            <h3 id="rTitle">업로드 결과</h3>
            <p class="modal__desc">정책에 의해 차단되었습니다.</p>
            <div class="modal__actions">
<!--                <a th:href="@{/upload-test}" class="btn btn-primary">확인</a>-->
                <button type="button" class="btn btn-primary" id="modalOk">확인</button>
                <a th:href="@{/block}" class="btn btn-ghost">정책 설정으로</a>
            </div>
        </div>
    </div>
</main>
<script th:src="@{/main.js}"></script>
</body>

</html>